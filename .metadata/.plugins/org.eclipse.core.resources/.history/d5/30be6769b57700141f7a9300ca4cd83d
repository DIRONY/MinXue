package com.sea.minxue.dialogue;

import com.sea.minxue.R;

import android.content.Context;
import android.database.Cursor;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CursorTreeAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class CategoryAdapter extends CursorTreeAdapter {
	
	private LayoutInflater mInflater = null;  
	private GroupCache cache;
	private ChildrenCache childrencache;
	public CategoryAdapter(Cursor cursor, Context context) {
		super(cursor, context);
		// TODO Auto-generated constructor stub
		mInflater = (LayoutInflater) context  
		        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
	}

	@Override
	protected Cursor getChildrenCursor(Cursor groupCursor) {
		// TODO Auto-generated method stub
		return groupCursor;
	}

	@Override
	protected View newGroupView(Context context, Cursor cursor,
			boolean isExpanded, ViewGroup parent) {
		// TODO Auto-generated method stub
		View groupview=mInflater.inflate(R.layout.cate_group_item_view,null);
		GroupCache group=new GroupCache();
		group.original=(TextView) groupview.findViewById(R.id.group);
		group.collect=(ImageView) groupview.findViewById(R.id.collect);
		groupview.setTag(group);
		return groupview;
	}

	@Override
	protected void bindGroupView(View view, Context context, Cursor cursor,
			boolean isExpanded) {
		// TODO Auto-generated method stub
		cache=(GroupCache) view.getTag();
		cache.original.setText(cursor.getString(cursor.getColumnIndex("original")));
		cache.collect.setAlpha(0.7f);
	}

	@Override
	protected View newChildView(Context context, Cursor cursor,
			boolean isLastChild, ViewGroup parent) {
		// TODO Auto-generated method stub
		View children=mInflater.inflate(R.layout.cate_children_item_view, null);
		ChildrenCache che=new ChildrenCache();
		che.translate=(TextView) children.findViewById(R.id.fschild);
		che.pinyin=(TextView) children.findViewById(R.id.scchild);
		che.horn=(ImageView) children.findViewById(R.id.horn);
		children.setTag(che);
		return children;
	}

	@Override
	protected void bindChildView(View view, Context context, Cursor cursor,
			boolean isLastChild) {
		// TODO Auto-generated method stub
		childrencache=(ChildrenCache) view.getTag();
		childrencache.translate.setText(cursor.getString(cursor.getColumnIndex("translate")));
		childrencache.pinyin.setText(cursor.getString(cursor.getColumnIndex("pinyin")));
		childrencache.horn.setAlpha(0.8f);
	}
	
	final class GroupCache{
		private TextView original;
		private ImageView collect;
	}
	
	final class ChildrenCache{
		private TextView translate;
		private TextView pinyin;
		private ImageView horn;
	}
}
